<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>WontumFileInfo Demo</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 20px;
			}

			.container {
				background: white;
				border-radius: 16px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
				max-width: 800px;
				width: 100%;
				padding: 40px;
			}

			h1 {
				color: #333;
				margin-bottom: 10px;
				font-size: 2rem;
			}

			.subtitle {
				color: #666;
				margin-bottom: 30px;
				font-size: 1rem;
			}

			.upload-area {
				border: 3px dashed #667eea;
				border-radius: 12px;
				padding: 40px;
				text-align: center;
				background: #f8f9ff;
				transition: all 0.3s ease;
				cursor: pointer;
			}

			.upload-area:hover {
				border-color: #764ba2;
				background: #f0f2ff;
			}

			.upload-area.dragging {
				border-color: #764ba2;
				background: #e8ebff;
				transform: scale(1.02);
			}

			.upload-icon {
				font-size: 3rem;
				margin-bottom: 10px;
			}

			.upload-text {
				color: #667eea;
				font-size: 1.1rem;
				font-weight: 500;
				margin-bottom: 5px;
			}

			.upload-hint {
				color: #999;
				font-size: 0.9rem;
			}

			input[type="file"] {
				display: none;
			}

			.info-section {
				margin-top: 30px;
				display: none;
			}

			.info-section.active {
				display: block;
				animation: fadeIn 0.5s ease;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.info-header {
				display: flex;
				align-items: center;
				gap: 15px;
				margin-bottom: 20px;
				padding-bottom: 15px;
				border-bottom: 2px solid #f0f0f0;
			}

			.file-icon {
				font-size: 2.5rem;
			}

			.file-name {
				color: #333;
				font-size: 1.3rem;
				font-weight: 600;
			}

			.info-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
				gap: 20px;
			}

			.info-item {
				background: #f8f9ff;
				padding: 20px;
				border-radius: 8px;
				border-left: 4px solid #667eea;
			}

			.info-label {
				color: #666;
				font-size: 0.85rem;
				text-transform: uppercase;
				letter-spacing: 0.5px;
				margin-bottom: 5px;
			}

			.info-value {
				color: #333;
				font-size: 1.3rem;
				font-weight: 600;
			}

			.quality-badge {
				display: inline-block;
				padding: 6px 12px;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				border-radius: 20px;
				font-size: 0.9rem;
				font-weight: 600;
			}

			.error-message {
				background: #fee;
				color: #c33;
				padding: 15px 20px;
				border-radius: 8px;
				border-left: 4px solid #c33;
				margin-top: 20px;
				display: none;
			}

			.error-message.active {
				display: block;
				animation: fadeIn 0.5s ease;
			}

			.loading {
				text-align: center;
				padding: 40px;
				display: none;
			}

			.loading.active {
				display: block;
			}

			.spinner {
				border: 4px solid #f0f0f0;
				border-top: 4px solid #667eea;
				border-radius: 50%;
				width: 50px;
				height: 50px;
				animation: spin 1s linear infinite;
				margin: 0 auto 15px;
			}

			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			.loading-text {
				color: #667eea;
				font-weight: 500;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>üìπ Video File Analyzer</h1>
			<p class="subtitle">Extract metadata from your video files using WontumFileInfo</p>

			<div class="upload-area" id="uploadArea">
				<div class="upload-icon">üé¨</div>
				<div class="upload-text">Click to select a video file</div>
				<div class="upload-hint">or drag and drop here</div>
				<input type="file" id="fileInput" accept="video/*" />
			</div>

			<div class="loading" id="loading">
				<div class="spinner"></div>
				<div class="loading-text">Analyzing video file...</div>
			</div>

			<div class="error-message" id="errorMessage"></div>

			<div class="info-section" id="infoSection">
				<div class="info-header">
					<div class="file-icon">üé•</div>
					<div class="file-name" id="fileName"></div>
				</div>

				<div class="info-grid">
					<div class="info-item">
						<div class="info-label">Resolution</div>
						<div class="info-value" id="resolution"></div>
					</div>

					<div class="info-item">
						<div class="info-label">Aspect Ratio</div>
						<div class="info-value" id="aspectRatio"></div>
					</div>

					<div class="info-item">
						<div class="info-label">Quality</div>
						<div class="info-value"><span class="quality-badge" id="quality"></span></div>
					</div>

					<div class="info-item">
						<div class="info-label">Duration</div>
						<div class="info-value" id="duration"></div>
					</div>

					<div class="info-item">
						<div class="info-label">File Size</div>
						<div class="info-value" id="fileSize"></div>
					</div>

					<div class="info-item">
						<div class="info-label">Bitrate</div>
						<div class="info-value" id="bitrate"></div>
					</div>

					<div class="info-item">
						<div class="info-label">Format</div>
						<div class="info-value" id="format"></div>
					</div>

					<div class="info-item">
						<div class="info-label">MIME Type</div>
						<div class="info-value" id="mimeType"></div>
					</div>
				</div>
			</div>
		</div>

		<script type="module">
			import { WontumFileInfo } from "../dist/wontum-player.esm.js"

			const uploadArea = document.getElementById("uploadArea")
			const fileInput = document.getElementById("fileInput")
			const loading = document.getElementById("loading")
			const errorMessage = document.getElementById("errorMessage")
			const infoSection = document.getElementById("infoSection")

			// Click to select file
			uploadArea.addEventListener("click", () => {
				fileInput.click()
			})

			// Handle file selection
			fileInput.addEventListener("change", handleFileSelect)

			// Drag and drop
			uploadArea.addEventListener("dragover", (e) => {
				e.preventDefault()
				uploadArea.classList.add("dragging")
			})

			uploadArea.addEventListener("dragleave", () => {
				uploadArea.classList.remove("dragging")
			})

			uploadArea.addEventListener("drop", (e) => {
				e.preventDefault()
				uploadArea.classList.remove("dragging")

				const files = e.dataTransfer.files
				if (files.length > 0) {
					fileInput.files = files
					handleFileSelect({ target: { files } })
				}
			})

			async function handleFileSelect(event) {
				const file = event.target.files?.[0]
				if (!file) return

				// Hide previous results and errors
				infoSection.classList.remove("active")
				errorMessage.classList.remove("active")
				loading.classList.add("active")

				try {
					// Create WontumFileInfo instance
					const videoInfo = new WontumFileInfo(file)

					// Extract metadata
					await videoInfo.extract()

					// Display information
					displayVideoInfo(videoInfo)

					// Clean up
					videoInfo.destroy()

					loading.classList.remove("active")
					infoSection.classList.add("active")
				} catch (error) {
					loading.classList.remove("active")
					showError(error.message)
				}
			}

			function displayVideoInfo(videoInfo) {
				document.getElementById("fileName").textContent = videoInfo.fileName
				document.getElementById("resolution").textContent = `${videoInfo.width} √ó ${videoInfo.height}`
				document.getElementById("aspectRatio").textContent = videoInfo.aspectRatio
				document.getElementById("quality").textContent = videoInfo.quality
				document.getElementById("duration").textContent = videoInfo.durationFormatted
				document.getElementById("fileSize").textContent = videoInfo.sizeFormatted
				document.getElementById("bitrate").textContent = videoInfo.bitrate ? `${videoInfo.bitrate.toLocaleString()} kbps` : "N/A"
				document.getElementById("format").textContent = videoInfo.fileExtension.toUpperCase().replace(".", "")
				document.getElementById("mimeType").textContent = videoInfo.mimeType
			}

			function showError(message) {
				errorMessage.textContent = `‚ùå ${message}`
				errorMessage.classList.add("active")
			}
		</script>
	</body>
</html>
